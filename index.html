<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chia S·∫ª ∆Ø·ªõc M∆°</title>
</head>
<body>
    <h2>Chia s·∫ª ∆∞·ªõc m∆° c·ªßa b·∫°n</h2>
    <input type="text" id="dream" placeholder="Nh·∫≠p ∆∞·ªõc m∆° c·ªßa b·∫°n">
    <button onclick="submitDream()">G·ª≠i ∆∞·ªõc m∆°</button>

    <h3>Danh s√°ch ∆∞·ªõc m∆°:</h3>
    <div id="dream-list"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
        import { getDatabase, ref, push, set, onChildAdded } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";

        // üî• Thay th√¥ng tin Firebase c·ªßa b·∫°n
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "chia-se-uoc-mo.firebaseapp.com",
            databaseURL: "https://chia-se-uoc-mo-default-rtdb.firebaseio.com/",
            projectId: "chia-se-uoc-mo",
            storageBucket: "chia-se-uoc-mo.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Kh·ªüi t·∫°o Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // G·ª≠i d·ªØ li·ªáu v√†o Firebase
        window.submitDream = function() {
            let dreamText = document.getElementById("dream").value;
            if (!dreamText) {
                alert("H√£y nh·∫≠p n·ªôi dung ∆∞·ªõc m∆°!");
                return;
            }

            const newDreamRef = push(ref(database, "dreams"));
            set(newDreamRef, { text: dreamText });

            document.getElementById("dream").value = "";
        };

        // Hi·ªÉn th·ªã d·ªØ li·ªáu th·ªùi gian th·ª±c
        const dreamList = document.getElementById("dream-list");
        onChildAdded(ref(database, "dreams"), (snapshot) => {
            let data = snapshot.val();
            let post = document.createElement("div");
            post.className = "dream";
            post.innerText = data.text;
            dreamList.appendChild(post);
        });
    </script>
</body>
</html>
